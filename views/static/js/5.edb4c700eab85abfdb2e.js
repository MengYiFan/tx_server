webpackJsonp([5],{QkXv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),l=a("9rMa"),n=a("X2Oc"),c=a("Zqu6"),r={data:function(){return{data:{patientName:"",medicalCard:"",mobileNumber:"",identityCard:"",feeType:"",type:this.$route.query.type||"ADD"},warn:{patientName:!1,medicalCard:!1,mobileNumber:!1,identityCard:!1,feeType:!1},canSubmit:!1,opacity:0,display:"none",type:""}},methods:s()({},Object(l.c)(["getUserId"]),{detection:function(t){var e=this.data[t];if(""!=e){switch(t){case"patientName":e.length<2||e.length>12?(this.canSubmit=!1,this.warn[t]=!0):this.warn[t]=!1;break;case"medicalCard":e.length<6||e.length>18?(this.canSubmit=!1,this.warn[t]=!0):this.warn[t]=!1;break;case"mobileNumber":/^(1[0-9]{10})$/.test(e)?this.warn[t]=!1:(this.warn[t]=!0,this.canSubmit=!1);break;case"identityCard":/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e)?this.warn[t]=!1:(this.warn[t]=!0,this.canSubmit=!1)}var a=!0;for(var i in this.data)if(""==this.data[i]||1==this.warn[i]){a=!1;break}this.canSubmit=a}else this.warn[t]=!1},blurHandle:function(t){this.detection(t)},inputHandle:function(t){this.detection(t)},submit:function(){var t=this;if(this.canSubmit){var e=this.getUserId();console.log(this.getUserId),Object(c.e)(e,this.data).then(function(e){if(console.log(e),e.ret){t.display="block";!function e(){t.opacity+=.2,t.opacity<1?Object(n.b)(e):setTimeout(function(){t.$router.push({path:"/patient"})},1e3)}()}})}}}),mounted:function(){this.type=this.$route.query.type||""}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-patient left"},[a("div",{staticClass:"weui-cells__title"},[t._v("个人基本信息")]),t._v(" "),a("div",{staticClass:"weui-cells weui-cells_form"},[a("div",{staticClass:"weui-cell",class:{"weui-cell_warn":t.warn.patientName}},[t._m(0),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.patientName,expression:"data.patientName"}],staticClass:"weui-input",attrs:{maxlength:"12",type:"text",placeholder:"请输入姓名"},domProps:{value:t.data.patientName},on:{blur:function(e){t.blurHandle("patientName")},input:[function(e){e.target.composing||t.$set(t.data,"patientName",e.target.value)},function(e){t.inputHandle("patientName")}]}})]),t._v(" "),t._m(1)]),t._v(" "),a("div",{staticClass:"weui-cell",class:{"weui-cell_warn":t.warn.medicalCard}},[t._m(2),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.medicalCard,expression:"data.medicalCard"}],staticClass:"weui-input",attrs:{maxlength:"12",type:"number",pattern:"[0-9]*",placeholder:"请输入就诊卡号"},domProps:{value:t.data.medicalCard},on:{blur:function(e){t.blurHandle("medicalCard")},input:[function(e){e.target.composing||t.$set(t.data,"medicalCard",e.target.value)},function(e){t.inputHandle("medicalCard")}]}})]),t._v(" "),t._m(3)]),t._v(" "),a("div",{staticClass:"weui-cell",class:{"weui-cell_warn":t.warn.mobileNumber}},[t._m(4),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.mobileNumber,expression:"data.mobileNumber"}],staticClass:"weui-input",attrs:{type:"tel",placeholder:"请输入手机号",maxlength:"11"},domProps:{value:t.data.mobileNumber},on:{blur:function(e){t.blurHandle("mobileNumber")},input:[function(e){e.target.composing||t.$set(t.data,"mobileNumber",e.target.value)},function(e){t.inputHandle("mobileNumber")}]}})]),t._v(" "),t._m(5)]),t._v(" "),a("div",{staticClass:"weui-cell",class:{"weui-cell_warn":t.warn.identityCard}},[t._m(6),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.identityCard,expression:"data.identityCard"}],staticClass:"weui-input",attrs:{maxlength:"18",type:"text",pattern:"[0-9Xx]*",value:"",placeholder:"请输入身份证号"},domProps:{value:t.data.identityCard},on:{blur:function(e){t.blurHandle("identityCard")},input:[function(e){e.target.composing||t.$set(t.data,"identityCard",e.target.value)},function(e){t.inputHandle("identityCard")}]}})]),t._v(" "),t._m(7)])]),t._v(" "),a("div",{staticClass:"weui-cells ",class:{"weui-cell_warn":t.warn.feeType}},[a("div",{staticClass:"weui-cell weui-cell_select weui-cell_select-after"},[t._m(8),t._v(" "),a("div",{staticClass:"weui-cell__bd"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.data.feeType,expression:"data.feeType"}],staticClass:"weui-select",attrs:{name:"select"},on:{blur:function(e){t.blurHandle("feeType")},change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.data,"feeType",e.target.multiple?a:a[0])},function(e){t.inputHandle("feeType")}]}},[a("option",{attrs:{disabled:"",value:""}},[t._v("请选择")]),t._v(" "),a("option",{attrs:{value:"1"}},[t._v("社保")]),t._v(" "),a("option",{attrs:{value:"2"}},[t._v("自费")])])])])]),t._v(" "),a("div",{staticClass:"weui-btn-area",on:{click:t.submit}},[a("a",{staticClass:"weui-btn",class:t.canSubmit?"weui-btn_primary":"weui-btn_disabled",attrs:{href:"javascript:",id:"showTooltips"}},[t._v("保存")])]),t._v(" "),a("div",{style:{opacity:t.opacity,display:t.display},attrs:{id:"toast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._v(" "),t._m(9)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label",attrs:{for:""}},[this._v("姓名")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__ft"},[e("i",{staticClass:"weui-icon-warn"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label",attrs:{for:""}},[this._v("就诊卡")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__ft"},[e("i",{staticClass:"weui-icon-warn"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label",attrs:{for:""}},[this._v("手机号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__ft"},[e("i",{staticClass:"weui-icon-warn"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label",attrs:{for:""}},[this._v("身份证号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__ft"},[e("i",{staticClass:"weui-icon-warn"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-cell__hd"},[e("label",{staticClass:"weui-label",attrs:{for:""}},[this._v("费别")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"weui-toast"},[e("i",{staticClass:"weui-icon-success-no-circle weui-icon_toast"}),this._v(" "),e("p",{staticClass:"weui-toast__content"},[this._v("成功, 即将跳转.")])])}]};var d=a("VU/8")(r,u,!1,function(t){a("XEJl")},"data-v-61c1b73e",null);e.default=d.exports},XEJl:function(t,e){}});
//# sourceMappingURL=5.edb4c700eab85abfdb2e.js.map